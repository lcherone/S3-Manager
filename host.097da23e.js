parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Ib0I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("crypto-js/aes")),e=r(require("crypto-js/enc-utf8"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e,r,n,s,u,a){try{var o=t[u](a),c=o.value}catch(i){return void r(i)}o.done?e(c):Promise.resolve(c).then(n,s)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(s,u){var a=t.apply(e,r);function o(t){n(a,s,u,o,c,"next",t)}function c(t){n(a,s,u,o,c,"throw",t)}o(void 0)})}}var u={props:["state"],watch:{"state.host":function(){var t=s(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,this.listBuckets();case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},mounted:function(){var t=this;return s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state.host.client){e.next=3;break}return e.next=3,t.listBuckets();case 3:case"end":return e.stop()}},e)}))()},methods:{listBuckets:function(){var t=this;return s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state.host.client){e.next=2;break}return e.abrupt("return");case 2:return console.log("buckets:listBuckets",t.state.host),e.prev=3,e.t0=t,e.t1=t.state.host,e.next=8,t.state.host.client.listBuckets();case 8:e.t2=e.sent,e.t0.$set.call(e.t0,e.t1,"buckets",e.t2),e.next=16;break;case 12:e.prev=12,e.t3=e.catch(3),t.$set(t.state.host,"buckets",[]),t.$set(t.state.host,"error",e.t3.message);case 16:t.$set(t.state,"loading",!1);case 17:case"end":return e.stop()}},e,null,[[3,12]])}))()}}};exports.default=u;
(function(){var t=exports.default||module.exports;"function"==typeof t&&(t=t.options),Object.assign(t,{render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.state.host?e("div",[e("section",[e("h1",{staticClass:"page-header"},[t._v("Buckets")]),t._v(" "),e("div",{staticClass:"mt-2"},[e("div",{staticClass:"bg-white table-responsive border border-top-0 rounded"},[e("table",{staticClass:"table table-sm"},[t._m(0),t._v(" "),e("tbody",t._l(t.state.host.buckets,function(s,a){return e("tr",{key:a},[e("th",{attrs:{scope:"row"}},[t._v(t._s(s.name))]),t._v(" "),e("td",[t._v(t._s(t._f("date_format")(s.creationDate)))]),t._v(" "),e("td",{staticClass:"text-right"},[e("router-link",{staticClass:"btn btn-xxs btn-outline-success",attrs:{to:"/host/"+t.state.host.name+"/"+s.name}},[t._v("Open")])],1)])}),0)])])])])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("thead",[s("tr",[s("th",{staticClass:"p-2",attrs:{scope:"col",width:"30%"}},[this._v("Name")]),this._v(" "),s("th",{staticClass:"p-2",attrs:{scope:"col",width:"50%"}},[this._v("Created")]),this._v(" "),s("th",{attrs:{scope:"col",width:"10%"}})])])}],_compiled:!0,_scopeId:"data-v-ed79ca",functional:void 0});})();
},{"crypto-js/aes":"Srb3","crypto-js/enc-utf8":"NlLc"}],"zUex":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("crypto-js/aes")),n=r(require("crypto-js/enc-utf8"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return c(t)||s(t)||i(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function s(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function c(t){if(Array.isArray(t))return u(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,o)}function f(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){p(a,r,o,i,s,"next",t)}function s(t){p(a,r,o,i,s,"throw",t)}i(void 0)})}}var l=require("mime-types"),g={props:["state"],data:function(){return{alert:{},host:{},paging:{page:1,pages:[],perPage:10,totalItems:0,totalItemsFiltered:0,next:function(){this.page++},back:function(){--this.page}},objects:[],bucketFilter:"",objectFilter:""}},watch:{"state.host.bucket":function(){var t=f(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("bucket: listObjects",e),t.next=3,this.listObjects(e,"");case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),"state.host.prefix":function(){var t=f(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("prefix: listObjects",e),t.next=3,this.listObjects(this.state.host.bucket,e);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),objects:function(){var t=this;this.paging.pages=[],this.paging.totalItems=this.objects.length;for(var e=1;e<=Math.ceil(this.paging.totalItemsFiltered=this.objects.filter(function(e){return e.bucket=t.state.host.bucket,e.prefix||e.name&&e.name.toLowerCase().indexOf(t.objectFilter.toLowerCase())>-1}).length/this.paging.perPage);e++)this.paging.pages.push(e)},objectFilter:function(){this.paging.page=1}},computed:{filteredObjects:function(){var t=this,e=this.objects.filter(function(e){return e.bucket=t.state.host.bucket,e.prefix||e.name&&e.name.toLowerCase().indexOf(t.objectFilter.toLowerCase())>-1});return-1!=this.paging.page?this.paginate(e,this.paging.perPage,this.paging.page):e},totalBytes:function(){return this.objects.reduce(function(t,e){return t+e.size},0)}},filters:{mime:function(t){return l.lookup(t)||"-"},formatBytes:function(t){if(0===t)return"0 Bytes";var e=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,e)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}},mounted:function(){var t=this;return f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.listObjects(t.state.host.bucket);case 2:case"end":return e.stop()}},e)}))()},methods:{paginate:function(t,e,n){return--n,t.slice(n*e,(n+1)*e)},isImage:function(t){return!!t&&["jpg","jpeg","png","gif","svg","webp","bmp"].includes(t.split(".").pop().toLowerCase())},isEditable:function(t){return!!t&&["jpg","jpeg","png","md","txt","js","php"].includes(t.split(".").pop().toLowerCase())},setPrefix:function(t){this.state.host.prefix=t},backPrefix:function(t){(t=t.replace(/\/+$/,"").split("/")).pop();var e=t.join("/")+"/";this.setPrefix("/"===e?"":e)},listObjects:function(){var t=arguments,e=this;return f(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.objects=[],n.next=4,(r=e.state.host.client).listObjectsV2.apply(r,o(t));case 4:(a=n.sent).on("data",function(t){t&&(t.name||t.prefix)&&e.objects.push(t)}),a.on("error",function(t){e.host.error=t.message,e.alert={type:"alert-danger",message:t.message}}),a.on("end",function(){}),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),e.host.error=n.t0.message,e.alert={type:"alert-danger",message:n.t0.message};case 14:case"end":return n.stop()}},n,null,[[0,10]])}))()},getImage:function(e){var n=this;return f(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.src){r.next=2;break}return r.abrupt("return");case 2:console.log("getImage",e),n.state.host.client.getObject(e.bucket,e.name,function(r,o){if(r)return console.error(r);var a=[];o.on("data",function(t){return a.push(t)}),o.on("end",function(){var r=escape(t.concat(a||[]).toString("base64")),o=l.lookup(e.name);n.$set(e,"src","data:".concat(o,";base64,").concat(r))})});case 4:case"end":return r.stop()}},r)}))()},open:function(e){this.state.host.client.getObject(this.host.bucket,e.name,function(n,r){if(n)return console.error(n);var o=[];r.on("data",function(t){o.push(t)}),r.on("end",function(){var n=escape(t.concat(o||[]).toString("base64")),r=l.lookup(e.name);window.open().document.write('\n            <iframe\n              src="data:'.concat(r,";base64,").concat(n,'"\n              style="\n                position: fixed;\n                top: 0px;\n                bottom: 0px;\n                right: 0px;\n                width: 100%;\n                border: none;\n                margin: 0;\n                padding: 0;\n                overflow: hidden;\n                height: 100%;\n            "></iframe>\n          '))})})}}};exports.default=g;
(function(){var t=exports.default||module.exports;"function"==typeof t&&(t=t.options),Object.assign(t,{render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return t.state.host&&t.state.host.bucket?s("div",{staticClass:"card sticky"},[s("div",{staticClass:"card-header"},[s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"card-title col-8"},[t._v(" Objects ("+t._s(t.state.host.bucket)+t._s(t.state.host.prefix?"/"+t.state.host.prefix:"")+")"),s("br"),t._v(" "),s("small",{staticClass:"text-muted"},[t._v("Total "+t._s(t.paging.totalItems)+" Items, Size: "+t._s(t._f("formatBytes")(t.totalBytes)))])]),t._v(" "),s("div",{staticClass:"input-group input-group-sm col-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.objectFilter,expression:"objectFilter"}],staticClass:"form-control",attrs:{placeholder:"Filter objects..."},domProps:{value:t.objectFilter},on:{input:function(a){a.target.composing||(t.objectFilter=a.target.value)}}})])])]),t._v(" "),s("ul",{staticClass:"list-unstyled mb-0"},[t.state.host.prefix?s("li",{staticClass:"media p-2 border-bottom"},[s("div",{staticClass:"media-body",staticStyle:{display:"inline-grid"}},[s("div",{staticClass:"font-weight-bold mt-0 mb-1 text-truncate"},[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.backPrefix(t.state.host.prefix)}}},[t._v("../ (go back)")])])])]):t._e(),t._v(" "),0===t.filteredObjects.length?s("li",{staticClass:"media p-2"},[t._m(0)]):t._e(),t._v(" "),t._l(t.filteredObjects,function(a){return s("li",{key:a.name+a.prefix,staticClass:"media border-bottom p-2"},[t.isImage(a.name)?[s("img",{staticClass:"mr-3 mt-1",staticStyle:{width:"120px","border-radius":"5px"},attrs:{load:t.getImage(a),src:a.src||"",alt:""}})]:t._e(),t._v(" "),a.prefix?[s("div",{staticClass:"media-body",staticStyle:{display:"inline-grid"}},[s("div",{staticClass:"font-weight-bold mt-0 mb-1 text-truncate"},[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.setPrefix(a.prefix)}}},[t._v(t._s(a.prefix))])])])]:[s("div",{staticClass:"media-body",staticStyle:{display:"inline-grid"}},[s("div",{staticClass:"font-weight-bold mt-0 mb-1 text-truncate"},[t._v(t._s(a.name))]),t._v(" "),s("small",[s("strong",[t._v("Last Modified:")]),t._v(" "),s("span",{staticClass:"text-muted nowrap"},[t._v(t._s(t._f("date_format")(a.lastModified)))])]),t._v(" "),s("small",[s("strong",[t._v("Type:")]),t._v(" "),s("span",{staticClass:"text-muted nowrap"},[t._v(t._s(t._f("mime")(a.name)))])]),t._v(" "),s("small",[s("strong",[t._v("Size:")]),t._v(" "),s("span",{staticClass:"text-muted nowrap"},[t._v(t._s(t._f("formatBytes")(a.size)))])])]),t._v(" "),s("button",{staticClass:"btn btn-xxs btn-dark mr-2",attrs:{type:"button"},on:{click:function(s){return t.editItem(a)}}},[s("fa",{attrs:{icon:"pencil-alt"}})],1),t._v(" "),s("button",{staticClass:"btn btn-xxs btn-danger",attrs:{type:"button",disabled:a.profile&&0===a.profile.id},on:{click:function(s){return t.deleteItem(a)}}},[s("fa",{attrs:{icon:"times"}})],1)]],2)})],2),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.filteredObjects.length>0,expression:"filteredObjects.length > 0"}],staticClass:"p-2",staticStyle:{"background-color":"#fafafa"}},[t.objects.length>0?s("ul",{staticClass:"pagination",staticStyle:{"justify-content":"center"}},[s("li",{staticClass:"page-item pagination-prev",class:{disabled:1==t.paging.page}},[s("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"},on:{click:function(){t.paging.back()}}},[s("span",[t._v("«")]),t._v(" "),s("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._v(" "),t._l(t.paging.pages,function(a){return[Math.abs(a-t.paging.page)<5||a===t.paging.pages.length||1===a?s("li",{key:"pn-"+a,staticClass:"page-item",class:{active:t.paging.page===a,last:a===t.paging.pages.length&&Math.abs(a-t.paging.page)>5,first:1===a&&Math.abs(a-t.paging.page)>5},on:{click:function(){t.paging.page=a}}},[s("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"}},[t._v(t._s(a))])]):t._e()]}),t._v(" "),s("li",{staticClass:"page-item pagination-next",class:{disabled:t.paging.page===t.paging.pages.length}},[s("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"},on:{click:function(){t.paging.next()}}},[s("span",[t._v("»")]),t._v(" "),s("span",{staticClass:"sr-only"},[t._v("Next")])])])],2):t._e()])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"media-body",staticStyle:{display:"inline-grid"}},[a("div",{staticClass:"text-truncate"},[this._v("No files.")])])}],_compiled:!0,_scopeId:"data-v-b306d3",functional:void 0});})();
},{"crypto-js/aes":"Srb3","crypto-js/enc-utf8":"NlLc","mime-types":"mJsC","buffer":"aMB2"}],"yEFA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("crypto-js/aes")),t=o(require("crypto-js/enc-utf8")),r=o(require("../components/host/buckets")),n=o(require("../components/host/objects"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t,r,n,o,s,c){try{var u=e[s](c),a=u.value}catch(i){return void r(i)}u.done?t(a):Promise.resolve(a).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var s=e.apply(t,r);function c(e){a(s,n,o,c,u,"next",e)}function u(e){a(s,n,o,c,u,"throw",e)}c(void 0)})}}var h={name:"host",props:["state","host_key","bucket","prefix"],components:{hostBuckets:r.default,hostObjects:n.default},data:function(){return{alert:{}}},watch:{host_key:function(){var e=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("host: watcher: host_key",t),!t){e.next=4;break}return e.next=4,this.setHost(this.state.hosts[t]||{});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),bucket:function(){var e=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("host: watcher: bucket",t),this.$set(this.state.host,"bucket",t||""),!t||!this.state.host){e.next=5;break}return e.next=5,this.setHost(this.state.host||{});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),"state.host":function(e){console.log("host: watcher: state.host",e),e.error?this.alert={type:"alert-danger",message:e.error}:this.alert={}}},beforeMount:function(){this.state.authenticated||this.$router.push("/login")},mounted:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setHost(e.state.hosts[e.host_key]);case 2:case"end":return t.stop()}},t)}))()},methods:{setHost:function(e){var t=this;return i(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("host:setHost",e),t.alert={},e=c({name:t.host_key,hostname:"",url:"",port:9e3,useSSL:!1,error:!1,buckets:[],bucket:t.bucket||"",prefix:t.prefix||""},e),n=new URL(e.url),e.hostname=n.hostname,e.port=parseInt(n.port,10),e.useSSL="https:"===n.protocol;try{e.client=new minio.Client({endPoint:e.hostname,port:e.port,useSSL:e.useSSL,accessKey:e.accessKey,secretKey:e.secretKey})}catch(o){e.error=o.message}t.$set(t.state.hosts,t.host_key,e),t.$set(t.state,"host",e);case 10:case"end":return r.stop()}},r)}))()}}};exports.default=h;
(function(){var t=exports.default||module.exports;"function"==typeof t&&(t=t.options),Object.assign(t,{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.state.authenticated&&t.state.host?a("article",{staticClass:"content container-fluid"},[a("nav",{attrs:{"aria-label":"breadcrumb"}},[a("div",{staticClass:"breadcrumb mt-3 d-flex justify-content-between align-items-center"},[a("ol",{staticClass:"breadcrumb mb-0 p-0"},[a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.$router.push("/")}}},[t._v("Hosts")])]),t._v(" "),t.state.host&&t.state.host.name?a("li",{class:["breadcrumb-item"],attrs:{"aria-current":"page"}},[t.state.host&&t.state.host.name&&t.bucket?a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.$router.push("/host/"+t.state.host.name)}}},[t._v(t._s(t.state.host.name))]):a("span",[t._v(t._s(t.state.host.name))])]):t._e(),t._v(" "),t.state.host&&t.state.host.name&&t.bucket?a("li",{class:["breadcrumb-item"],attrs:{"aria-current":"page"}},[t.state.host&&t.state.host.name&&!t.bucket&&t.prefix?a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.$router.push("/host/"+t.state.host.name+"/"+t.bucket)}}},[t._v(t._s(t.bucket))]):a("span",[t._v(t._s(t.bucket))])]):t._e(),t._v(" "),t.state.host&&t.state.host.name&&t.bucket&&t.prefix?a("li",{class:["breadcrumb-item"],attrs:{"aria-current":"page"}},[t._v(t._s(t.prefix))]):t._e()])])]),t._v(" "),a("alert",{attrs:{alert:t.alert}}),t._v(" "),t.state.host.name?[t.state.host.bucket?a("host-objects",{attrs:{state:t.state}}):a("host-buckets",{attrs:{state:t.state}})]:t._e()],2):t._e()},staticRenderFns:[],_compiled:!0,_scopeId:"data-v-8c3bee",functional:void 0});})();
},{"crypto-js/aes":"Srb3","crypto-js/enc-utf8":"NlLc","../components/host/buckets":"Ib0I","../components/host/objects":"zUex"}]},{},[], null)