parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"YPMF":[function(require,module,exports) {
"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function t(t){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?e(Object(s),!0).forEach(function(e){r(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o={methods:{export_hosts:function(){var e={};for(var t in this.state.hosts)e[t]={url:this.state.hosts[t].url,accessKey:this.state.hosts[t].accessKey,secretKey:this.state.hosts[t].secretKey};var r=document.createElement("a");r.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2))),r.setAttribute("download","hosts.json"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)},import_hosts:function(e){var r=this;if(window.FileReader){var o=new FileReader;o.onload=function(o){if(2==o.target.readyState)if(o.target.error)console.error("Error reading file.");else try{var s=JSON.parse(o.target.result);r.state.hosts=t(t({},r.state.hosts),s);var n=JSON.parse(JSON.stringify(r.state));delete n.password,delete n.host,localStorage.state=CryptoAES.encrypt(JSON.stringify(n),r.state.password).toString()}catch(e){console.error(e)}},o.readAsText(e.target.files[0])}else this.error="Browser not supported."}}};exports.default=o;
},{}],"ml7b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("crypto-js/aes")),t=r(require("crypto-js/enc-utf8"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r,s,a,n,o){try{var i=e[n](o),c=i.value}catch(u){return void r(u)}i.done?t(c):Promise.resolve(c).then(s,a)}function a(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var o=e.apply(t,r);function i(e){s(o,a,n,i,c,"next",e)}function c(e){s(o,a,n,i,c,"throw",e)}i(void 0)})}}var n={reset:function(){return JSON.stringify({})},public:function(e,t){return JSON.stringify({Version:"2012-10-17",Statement:[{Effect:"Allow",Principal:{AWS:["*"]},Action:["s3:GetBucketLocation"],Resource:["arn:aws:s3:::"+e]},{Effect:"Allow",Principal:{AWS:["*"]},Action:["s3:ListBucket"],Resource:["arn:aws:s3:::"+e],Condition:{StringEquals:{"s3:prefix":[t]}}},{Effect:"Allow",Principal:{AWS:["*"]},Action:["s3:GetObject"],Resource:["arn:aws:s3:::"+e+"/"+("*"===t?"*":t+"*")]}]},null,2)}},o={props:["state","reloadBuckets"],data:function(){return{saveable:!0,allowPresets:!1,form:{errors:{},values:{name:"",policy:"{}"}}}},watch:{bucket:function(e){this.form.values=JSON.parse(JSON.stringify(e))},"form.values.name":function(e){""===e?(this.allowPresets=!1,this.saveable=!1,this.form.errors.name="Bucket name cannot be blank."):(this.allowPresets=!0,this.saveable=!0,this.form.errors.name&&this.form.errors.name.includes("Bucket name cannot be blank")&&delete this.form.errors.name,this.form.values.name.match(/[^a-zA-Z0-9 \!\-_.*'()]/g)&&(this.form.errors.name="Only characters: a-zA-Z0-9 !*-_.*'() are allowed."),this.form.values.name=this.form.values.name.replace(/[^a-zA-Z0-9 \!\-_.*'()]/g,"")),this.existingBuckets(e)?(this.allowPresets=!1,this.saveable=!1,this.form.errors.name="A bucket already exists with that name."):(this.form.errors.name&&this.form.errors.name.includes("A bucket already exists with that name.")&&delete this.form.errors.name,this.allowPresets=!0,this.saveable=!0)}},methods:{preset:function(e){this.form.values.policy=n[e](this.form.values.name,"*")},existingBuckets:function(e){return this.state.host.buckets.some(function(t){return t.name&&t.name.toLowerCase()===e.toLowerCase()})},submit:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.form.errors={},e.form.values.name=e.form.values.name.trim(),""===e.form.values.name&&(e.form.errors.name="Bucket name cannot be blank."),r="";try{r=JSON.stringify(JSON.parse(e.form.values.policy))}catch(s){e.$set(e.form.errors,"policy","Error: "+s.message)}if(!Object.keys(e.form.errors).length){t.next=8;break}return e.saveable=!1,t.abrupt("return",!1);case 8:return t.prev=8,t.next=11,e.state.host.client.makeBucket(e.form.values.name,"us-east-1");case 11:e.$modal.close(),e.$snackbar.show({type:"bg-success text-white",message:"Bucket created."}),["null","{}"].includes(r)||setTimeout(a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.state.host.client.setBucketPolicy(e.form.values.name,["null","{}"].includes(r)?"":r);case 3:e.$snackbar.show({type:"bg-success text-white",message:"Bucket policy set."}),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),e.$snackbar.show({type:"bg-danger text-white",message:"Error: "+t.t0.message+"."}),e.$set(e.form.errors,"policy","Error: "+t.t0.message+".");case 10:case"end":return t.stop()}},t,null,[[0,6]])})),1500),setTimeout(function(){e.reloadBuckets()},250),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(8),e.form.errors.global=t.t0.message;case 20:case"end":return t.stop()}},t,null,[[8,17]])}))()}}};exports.default=o;
(function(){var t=exports.default||module.exports;"function"==typeof t&&(t=t.options),Object.assign(t,{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal-dialog modal-md",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Create Bucket")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$modal.close()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])]),t._v(" "),a("form",{attrs:{"no-validate":""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"modal-body"},[t.form.errors.global?a("div",[a("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.form.errors.global))])]):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"input-name"}},[t._v("Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.values.name,expression:"form.values.name"}],staticClass:"form-control",class:["form-control",{"is-invalid":t.form.errors.name}],attrs:{type:"text",id:"input-name",placeholder:"Enter unique name for new bucket...",readonly:"{}"!==t.form.values.policy},domProps:{value:t.form.values.name},on:{input:[function(e){e.target.composing||t.$set(t.form.values,"name",e.target.value)},function(e){return t.existingBuckets(t.form.values.name)}]}}),t._v(" "),t.form.errors.name?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.form.errors.name))]):a("small",{staticClass:"form-text text-muted"},[t._v("Once created a bucket cannot be renamed. Set first if you intend to set policy.")])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"input-policy"}},[t._v("Policy")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.allowPresets,expression:"allowPresets"}],staticClass:"p p-1 pl-2 text-muted bg-light border-top border-right border-left"},[t._v(" Presets: "),a("button",{staticClass:"btn btn-xxs btn-link",attrs:{type:"button",disabled:!t.allowPresets},on:{click:function(e){return t.preset("reset")}}},[t._v("Reset")]),t._v(" "),a("button",{staticClass:"btn btn-xxs btn-link",attrs:{type:"button",disabled:!t.allowPresets},on:{click:function(e){return t.preset("public")}}},[t._v("Make Public")])]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.values.policy,expression:"form.values.policy"}],class:["form-control","rounded-0",{"is-invalid":t.form.errors.policy}],domProps:{value:t.form.values.policy},on:{input:function(e){e.target.composing||t.$set(t.form.values,"policy",e.target.value)}}}),t._v(" "),t.form.errors.policy?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.form.errors.policy))]):a("small",{staticClass:"form-text text-muted"},[t._v(" See AWS "),a("a",{attrs:{href:"https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html",target:"_blank"}},[t._v("Example Bucket Policies")]),t._v(" docs page for examples. ")])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.$modal.close()}}},[t._v("Close")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:!t.saveable}},[a("fa",{attrs:{icon:"save"}}),t._v("Â Create ")],1)])])])])])},staticRenderFns:[],_compiled:!0,_scopeId:"data-v-2131fa",functional:void 0});})();
},{"crypto-js/aes":"Srb3","crypto-js/enc-utf8":"NlLc"}],"XurM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("crypto-js/aes")),r=t(require("crypto-js/enc-utf8"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e,r,t,n,s,o,i){try{var c=e[o](i),u=c.value}catch(a){return void t(a)}c.done?r(u):Promise.resolve(u).then(n,s)}function s(e){return function(){var r=this,t=arguments;return new Promise(function(s,o){var i=e.apply(r,t);function c(e){n(i,s,o,c,u,"next",e)}function u(e){n(i,s,o,c,u,"throw",e)}c(void 0)})}}var o={reset:function(){return JSON.stringify({})},public:function(e,r){return JSON.stringify({Version:"2012-10-17",Statement:[{Effect:"Allow",Principal:{AWS:["*"]},Action:["s3:GetBucketLocation"],Resource:["arn:aws:s3:::"+e]},{Effect:"Allow",Principal:{AWS:["*"]},Action:["s3:ListBucket"],Resource:["arn:aws:s3:::"+e],Condition:{StringEquals:{"s3:prefix":[r]}}},{Effect:"Allow",Principal:{AWS:["*"]},Action:["s3:GetObject"],Resource:["arn:aws:s3:::"+e+"/"+("*"===r?"*":r+"*")]}]},null,2)}},i={props:["state","bucket"],data:function(){return{form:{errors:{},values:{name:"",policy:""}}}},watch:{bucket:function(e){this.form.values=JSON.parse(JSON.stringify(e))}},mounted:function(){this.form.values=JSON.parse(JSON.stringify(this.bucket))},methods:{preset:function(e){this.form.values.policy=o[e](this.form.values.name,"*")},submit:function(){var e=this;return s(regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.form.errors={},t="";try{t=JSON.stringify(JSON.parse(e.form.values.policy))}catch(n){e.$set(e.form.errors,"policy","Error: "+n.message)}if(!Object.keys(e.form.errors).length){r.next=5;break}return r.abrupt("return",!1);case 5:return r.prev=5,r.next=8,e.state.host.client.setBucketPolicy(e.form.values.name,["null","{}"].includes(t)?"":t);case 8:e.$modal.close(),e.$snackbar.show({type:"bg-success text-white",message:"Bucket saved!"}),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(5),e.$set(e.form.errors,"policy","Error: "+r.t0.message);case 15:case"end":return r.stop()}},r,null,[[5,12]])}))()}}};exports.default=i;
(function(){var t=exports.default||module.exports;"function"==typeof t&&(t=t.options),Object.assign(t,{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal-dialog modal-md",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Edit Bucket")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$modal.close()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])]),t._v(" "),a("form",{attrs:{"no-validate":""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"modal-body"},[t.form.errors.global?a("div",[a("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.form.errors.global))])]):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"input-name"}},[t._v("Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.values.name,expression:"form.values.name"}],staticClass:"form-control",class:["form-control",{"is-invalid":t.form.errors.name}],attrs:{type:"text",id:"input-name",placeholder:"Enter unique name for the bucket...",readonly:""},domProps:{value:t.form.values.name},on:{input:function(e){e.target.composing||t.$set(t.form.values,"name",e.target.value)}}}),t._v(" "),t.form.errors.name?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.form.errors.name))]):a("small",{staticClass:"form-text text-muted"},[t._v("Once created a bucket cannot be renamed.")])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"input-policy"}},[t._v("Policy")]),t._v(" "),a("div",{staticClass:"p p-1 pl-2 text-muted bg-light border-top border-right border-left"},[t._v(" Presets: "),a("button",{staticClass:"btn btn-xxs btn-link",attrs:{type:"button"},on:{click:function(e){return t.preset("reset")}}},[t._v("Reset")]),t._v(" "),a("button",{staticClass:"btn btn-xxs btn-link",attrs:{type:"button"},on:{click:function(e){return t.preset("public")}}},[t._v("Make Public")])]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.values.policy,expression:"form.values.policy"}],class:["form-control","rounded-0",{"is-invalid":t.form.errors.policy}],domProps:{value:t.form.values.policy},on:{input:function(e){e.target.composing||t.$set(t.form.values,"policy",e.target.value)}}}),t._v(" "),t.form.errors.policy?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.form.errors.policy))]):a("small",{staticClass:"form-text text-muted"},[t._v(" See AWS "),a("a",{attrs:{href:"https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html",target:"_blank"}},[t._v("Example Bucket Policies")]),t._v(" docs page for examples. ")])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.$modal.close()}}},[t._v("Close")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[a("fa",{attrs:{icon:"save"}}),t._v("Â Save ")],1)])])])])])},staticRenderFns:[],_compiled:!0,_scopeId:"data-v-d4035e",functional:void 0});})();
},{"crypto-js/aes":"Srb3","crypto-js/enc-utf8":"NlLc"}],"Ib0I":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./bucket-create-modal")),n=r(require("./bucket-edit-modal"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,r,s,a,o){try{var c=t[a](o),u=c.value}catch(i){return void n(i)}c.done?e(u):Promise.resolve(u).then(r,s)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function c(t){s(o,r,a,c,u,"next",t)}function u(t){s(o,r,a,c,u,"throw",t)}c(void 0)})}}var o={props:["state"],data:function(){return{alert:{}}},computed:{showPush:function(){return Object.keys(this.state.hosts).length>1}},watch:{"state.host.name":function(){var t=a(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,this.listBuckets();case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},mounted:function(){var t=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state.host.client){e.next=3;break}return e.next=3,t.listBuckets();case 3:case"end":return e.stop()}},e)}))()},methods:{reenumerate:function(){var t=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$set(t.state.host,"enumerated",!1),e.next=3,t.listBuckets();case 3:case"end":return e.stop()}},e)}))()},listBuckets:function(){var t=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state.host.client){e.next=2;break}return e.abrupt("return");case 2:if(console.log("buckets:listBuckets",t.state.host),e.prev=3,t.state.host.enumerated){e.next=6;break}return e.delegateYield(regeneratorRuntime.mark(function e(){var n,r,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.state.host.client.listBuckets();case 2:for(o in n=e.sent,t.$set(t.state.host,"buckets",n),t.$set(t.state.host,"total_objects",0),t.$set(t.state.host,"total_size",0),t.$set(t.state.host,"total_size",0),r={},{},s=function(e){setTimeout(a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",function(){var t=a(regeneratorRuntime.mark(function t(e){var n,s=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.state.host.client.getBucketPolicy(this.state.host.buckets[e].name);case 3:n=t.sent,n=JSON.stringify(JSON.parse(n),null,2),this.$set(this.state.host.buckets[e],"policy",n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),this.$set(this.state.host.buckets[e],"policy","{}");case 11:return this.$set(this.state.host.buckets[e],"objects",[]),this.$set(this.state.host.buckets[e],"total_objects",0),this.$set(this.state.host.buckets[e],"total_size",0),t.next=16,this.state.host.client.listObjectsV2(this.state.host.buckets[e].name,"",!0);case 16:r[e]=t.sent,r[e].on("data",function(t){t&&(t.name||t.prefix)&&(s.state.host.buckets[e].objects.push(t),s.state.host.buckets[e].total_objects++,s.state.host.buckets[e].total_size=s.state.host.buckets[e].total_size+t.size)}),r[e].on("end",function(){s.state.host.total_objects=s.state.host.total_objects+s.state.host.buckets[e].total_objects,s.state.host.total_size=s.state.host.total_size+s.state.host.buckets[e].total_size});case 19:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}().bind(t)(e));case 1:case"end":return n.stop()}},n)})),100*e)},t.state.host.buckets)s(o);t.$set(t.state.host,"enumerated",!0);case 12:case"end":return e.stop()}},e)})(),"t0",6);case 6:e.next=12;break;case 8:e.prev=8,e.t1=e.catch(3),t.$set(t.state.host,"buckets",[]),t.$set(t.state.host,"error",e.t1.message);case 12:t.$set(t.state,"loading",!1);case 13:case"end":return e.stop()}},e,null,[[3,8]])}))()},createBucket:function(){this.$modal.show({static:!0,component:e.default,props:{state:this.state,reloadBuckets:this.reenumerate}})},download:function(e){var n=this;return a(regeneratorRuntime.mark(function r(){var s,o,c,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n.$snackbar.show({type:"bg-success text-white",message:"Building Zip, please wait..."}),s=function(){var t=a(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(r,s){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.state.host.client.listObjectsV2(e,"",!0);case 2:a=t.sent,o=[],a.on("data",function(t){t&&(t.name||t.prefix)&&(n.$snackbar.show({type:"bg-success text-white",message:"Fetching: "+t.name}),o.push(t))}),a.on("end",function(){return r(o)}),a.on("error",function(t){return s(t)});case 7:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),o=function(e,r){return new Promise(function(s,a){n.state.host.client.getObject(e,r,function(e,a){var o=[];a.on("data",function(t){n.$snackbar.show({type:"bg-success text-white",message:"Downloading: "+r}),o.push(t)}),a.on("end",function(){return s(t.concat(o||[]))})})})},c=function(t,e){return new Promise(function(){var r=a(regeneratorRuntime.mark(function r(s,a){var c,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:c=new JSZip,r.t0=regeneratorRuntime.keys(e);case 2:if((r.t1=r.t0()).done){r.next=13;break}return u=r.t1.value,n.$snackbar.show({type:"bg-success text-white",message:"Zipping: "+e[u].name}),r.t2=c,r.t3=e[u].name,r.next=9,o(t,e[u].name);case 9:r.t4=r.sent,r.t2.file.call(r.t2,r.t3,r.t4),r.next=2;break;case 13:c.generateAsync({type:"blob"}).then(function(t){n.$snackbar.show({type:"bg-success text-white",message:"Zip Created"}),s(t)});case 14:case"end":return r.stop()}},r)}));return function(t,e){return r.apply(this,arguments)}}())},u=function(t){n.$snackbar.show({type:"bg-success text-white",message:"Downloading: ".concat(e.name,".zip")}),FileSaver.saveAs(t,"".concat(e.name,".zip"))},r.prev=5,r.t0=u,r.t1=c,r.t2=e.name,r.next=11,s(e.name);case 11:return r.t3=r.sent,r.next=14,(0,r.t1)(r.t2,r.t3);case 14:r.t4=r.sent,(0,r.t0)(r.t4),r.next=22;break;case 18:r.prev=18,r.t5=r.catch(5),n.$snackbar.show({type:"bg-danger text-white",message:r.t5.message}),console.error(r.t5);case 22:case"end":return r.stop()}},r,null,[[5,18]])}))()},push:function(t){},edit:function(t){this.$modal.show({static:!0,component:n.default,props:{state:this.state,bucket:t}})},del:function(t){var e=this;this.$modal.show({title:"Delete Bucket?",text:"Are you sure you want to delete this bucket?",color:"bg-danger text-white",size:"modal-md",centered:!0,static:!0,buttons:[{title:"Yes",type:"btn-success",cb:function(){var n=a(regeneratorRuntime.mark(function n(r,s){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.state.host.client.removeBucket(t.name);case 3:e.$snackbar.show({type:"bg-success text-white",message:"Bucket deleted!"}),e.reenumerate(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.alert={type:"alert-danger",message:"An error occurred when deleting bucket, refresh the page and try again."};case 10:e.$modal.close();case 11:case"end":return n.stop()}},n,null,[[0,7]])}));return function(t,e){return n.apply(this,arguments)}}()},{title:"No",type:"btn-danger",cb:function(t,n){e.$modal.close()}}]})}}};exports.default=o;
(function(){var t=exports.default||module.exports;"function"==typeof t&&(t=t.options),Object.assign(t,{render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return t.state.host?a("div",[a("section",[a("h1",{staticClass:"page-header"},[t._v(" Buckets "),a("a",{staticClass:"btn btn-sm btn-light",attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.reenumerate()}}},[a("fa",{attrs:{icon:"sync"}}),t._v("Â Reload ")],1)]),t._v(" "),a("div",{staticClass:"clearfix"},[a("strong",[t._v("Total:")]),t._v(" "),a("span",{staticClass:"text-muted"},[t._v(" Buckets: "),a("span",{staticClass:"badge badge-light"},[t._v(t._s(t.state.host.buckets.length))]),t._v(", Objects: "),a("span",{staticClass:"badge badge-light"},[t._v(t._s(t.state.host.total_objects||0))]),t._v(", Disk Space: "),a("span",{staticClass:"badge badge-light"},[t._v(t._s(t._f("formatBytes")(t.state.host.total_size)))]),t._v(" "),a("a",{staticClass:"btn btn-sm btn-outline-success float-right",attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.createBucket()}}},[a("fa",{attrs:{icon:"plus"}}),t._v("Â Create Bucket ")],1)])]),t._v(" "),a("alert",{attrs:{alert:t.alert}}),t._v(" "),a("div",{staticClass:"mt-2 mb-5"},[a("div",{staticClass:"bg-white table-responsive border border-top-0 rounded"},[a("table",{staticClass:"table table-sm"},[t._m(0),t._v(" "),a("tbody",t._l(t.state.host.buckets,function(s,e){return a("tr",{key:e},[a("th",{attrs:{scope:"row"}},[a("router-link",{attrs:{to:"/host/"+t.state.host.name+"/"+s.name}},[t._v(t._s(s.name))])],1),t._v(" "),a("td",[t._v(t._s(t._f("date_format")(s.creationDate)))]),t._v(" "),a("td",[t._v(t._s(s.total_objects||0))]),t._v(" "),a("td",[t._v(t._s(t._f("formatBytes")(s.total_size)))]),t._v(" "),a("td",{staticClass:"text-right"},[a("div",{staticClass:"d-inline-flex text-right"},[a("a",{staticClass:"btn btn-xxs btn-outline-secondary mr-1",attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.download(s)}}},[a("span",{staticClass:"d-inline-flex"},[a("fa",{attrs:{icon:"download"}}),t._v(" "),a("span",{staticClass:"ml-1 mt-1 d-none d-xl-block"},[t._v("Download")])],1)]),t._v(" "),a("a",{staticClass:"btn btn-xxs btn-outline-primary mr-1",attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.edit(s)}}},[a("span",{staticClass:"d-inline-flex"},[a("fa",{attrs:{icon:"pencil-alt"}}),t._v(" "),a("span",{staticClass:"ml-1 mt-1 d-none d-xl-block"},[t._v("Edit")])],1)]),t._v(" "),a("a",{staticClass:"btn btn-xxs btn-outline-danger",attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.del(s)}}},[a("span",{staticClass:"d-inline-flex"},[a("fa",{attrs:{icon:"times"}}),t._v(" "),a("span",{staticClass:"ml-1 mt-1 d-none d-xl-block"},[t._v("Delete")])],1)])])])])}),0),t._v(" "),a("tfoot",[a("tr",[a("th",{attrs:{scope:"row",colspan:"2"}}),t._v(" "),a("td",[t._v(t._s(t.state.host.total_objects))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t._f("formatBytes")(t.state.host.total_size)))])])])])])])],1)]):t._e()},staticRenderFns:[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",[a("tr",[a("th",{staticClass:"p-2",attrs:{scope:"col",width:"25%"}},[t._v("Name")]),t._v(" "),a("th",{staticClass:"p-2",attrs:{scope:"col",width:"25%"}},[t._v("Created")]),t._v(" "),a("th",{staticClass:"p-2",attrs:{scope:"col",width:"15%"}},[t._v("Total Objects")]),t._v(" "),a("th",{staticClass:"p-2",attrs:{scope:"col",width:"15%"}},[t._v("Total Size")]),t._v(" "),a("th",{attrs:{scope:"col",width:"20%"}})])])}],_compiled:!0,_scopeId:"data-v-f7fdb1",functional:void 0});})();
},{"./bucket-create-modal":"ml7b","./bucket-edit-modal":"XurM","buffer":"aMB2"}],"zUex":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("crypto-js/aes")),n=r(require("crypto-js/enc-utf8"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return u(e)||c(e)||i(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function c(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function u(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,o,s,a){try{var i=e[s](a),c=i.value}catch(u){return void n(u)}i.done?t(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var s=e.apply(t,n);function a(e){l(s,r,o,a,i,"next",e)}function i(e){l(s,r,o,a,i,"throw",e)}a(void 0)})}}var g=require("mime-types"),h={props:["state"],data:function(){return{alert:{},host:{},paging:{page:1,pages:[],perPage:10,totalItems:0,totalItemsFiltered:0,next:function(){this.page++},back:function(){--this.page}},sort:{col:"name",desc:!1},objects:[],bucketFilter:"",objectFilter:""}},watch:{"state.host.bucket":function(){var e=f(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("bucket: listObjects",t),e.next=3,this.listObjects(t,"");case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),"state.host.prefix":function(){var e=f(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("prefix: listObjects",t),e.next=3,this.listObjects(this.state.host.bucket,t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),"paging.perPage":function(){this.computePaging()},objects:function(){this.computePaging()},objectFilter:function(){this.paging.page=1}},computed:{filteredObjects:function(){var e=this,t=this.objects.filter(function(t){return t.bucket=e.state.host.bucket,t.prefix||t.name&&t.name.toLowerCase().indexOf(e.objectFilter.toLowerCase())>-1});return(-1!=this.paging.page?this.paginate(t,this.paging.perPage,this.paging.page):t).sort(function(t,n){return t[e.sort.col]<n[e.sort.col]?e.sort.desc?-1:1:t[e.sort.col]>n[e.sort.col]?e.sort.desc?1:-1:0})},totalBytes:function(){return this.objects.reduce(function(e,t){return e+t.size},0)}},filters:{mime:function(e){return g.lookup(e)||"-"},formatBytes:function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}},mounted:function(){this.listObjects(this.state.host.bucket),this.$nextTick(function(){var e=this;this.$refs.upload&&(this.$refs.upload.onchange=function(t){e.uploadFile(t)})})},methods:{computePaging:function(){var e=this;this.paging.pages=[],this.paging.totalItems=this.objects.length;for(var t=1;t<=Math.ceil(this.paging.totalItemsFiltered=this.objects.filter(function(t){return t.bucket=e.state.host.bucket,t.prefix||t.name&&t.name.toLowerCase().indexOf(e.objectFilter.toLowerCase())>-1}).length/this.paging.perPage);t++)this.paging.pages.push(t)},paginate:function(e,t,n){return--n,e.slice(n*t,(n+1)*t)},isImage:function(e){return!!e&&["jpg","jpeg","png","gif","svg","webp","bmp"].includes(e.split(".").pop().toLowerCase())},isEditable:function(e){return!!e&&["jpg","jpeg","png","md","txt","js","php"].includes(e.split(".").pop().toLowerCase())},setPrefix:function(e){this.state.host.prefix=e},backPrefix:function(e){(e=e.replace(/\/+$/,"").split("/")).pop();var t=e.join("/")+"/";this.setPrefix("/"===t?"":t)},setSort:function(e){this.paging.page=1,this.sort={col:e,desc:this.sort.col===e&&!this.sort.desc}},listObjects:function(){var e=arguments,t=this;return f(regeneratorRuntime.mark(function n(){var r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t.objects=[],n.next=4,(r=t.state.host.client).listObjectsV2.apply(r,s(e));case 4:(o=n.sent).on("data",function(e){e&&(e.name||e.prefix)&&t.objects.push(e)}),o.on("error",function(e){t.host.error=e.message,t.alert={type:"alert-danger",message:e.message}}),o.on("end",function(){}),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),t.host.error=n.t0.message,t.alert={type:"alert-danger",message:n.t0.message};case 14:case"end":return n.stop()}},n,null,[[0,10]])}))()},getImage:function(t){var n=this;return f(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t.src||t.loading||t.loaded)){r.next=2;break}return r.abrupt("return");case 2:t.loading=!0,console.log("objects:getImage",JSON.stringify(t)),n.state.host.client.getObject(t.bucket,t.name,function(r,o){if(r)return console.error(r);var s=[];o.on("data",function(e){return s.push(e)}),o.on("end",function(){t.loading=!1,t.loaded=!0;var r=escape(e.concat(s||[]).toString("base64")),o=g.lookup(t.name);n.$set(t,"src","data:".concat(o,";base64,").concat(r))})});case 5:case"end":return r.stop()}},r)}))()},uploadFile:function(e){var t=this;return f(regeneratorRuntime.mark(function n(){var r,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(window.FileReader){n.next=3;break}return t.$snackbar.show({type:"bg-danger text-white",message:"Browser not supported."}),n.abrupt("return");case 3:n.t0=regeneratorRuntime.keys(e.target.files);case 4:if((n.t1=n.t0()).done){n.next=23;break}if(r=n.t1.value,"object"===o(e.target.files[r])){n.next=8;break}return n.abrupt("continue",4);case 8:return t.$snackbar.show({type:"bg-success text-white",message:"Uploading: "+e.target.files[r].name}),n.prev=9,n.next=12,t.file2Buffer(e.target.files[r]);case 12:return s=n.sent,n.next=15,t.state.host.client.putObject(t.state.host.bucket,e.target.files[r].name,s,{"Content-Type":e.target.files[r].type,"Content-Size":e.target.files[r].size,"Last-Modified":e.target.files[r].lastModified});case 15:n.next=21;break;case 17:n.prev=17,n.t2=n.catch(9),t.$snackbar.show({type:"bg-danger text-white",message:n.t2.message}),console.error(n.t2);case 21:n.next=4;break;case 23:t.$snackbar.show({type:"bg-success text-white",message:"Upload Complete"}),t.listObjects(t.state.host.bucket);case 25:case"end":return n.stop()}},n,null,[[9,17]])}))()},deleteItem:function(e){var t=this;this.$modal.show({title:"Delete Object?",text:"Are you sure you want to delete this object?",color:"bg-danger text-white",size:"modal-md",centered:!0,static:!0,buttons:[{title:"Yes",type:"btn-success",cb:function(){var n=f(regeneratorRuntime.mark(function n(r,o){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.state.host.client.removeObject(t.state.host.bucket,e.name);case 3:t.listObjects(t.state.host.bucket),t.$snackbar.show({type:"bg-success text-white",message:"Object deleted!"}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t.alert={type:"alert-danger",message:"An error occurred when deleting bucket, refresh the page and try again."};case 10:t.$modal.close();case 11:case"end":return n.stop()}},n,null,[[0,7]])}));return function(e,t){return n.apply(this,arguments)}}()},{title:"No",type:"btn-danger",cb:function(e,n){t.$modal.close()}}]})},open:function(t){this.state.host.client.getObject(this.state.host.bucket,t.name,function(n,r){if(n)return console.error(n);var o=[];r.on("data",function(e){o.push(e)}),r.on("end",function(){var n=escape(e.concat(o||[]).toString("base64")),r=g.lookup(t.name);window.open().document.write('\n            <iframe\n              src="data:'.concat(r,";base64,").concat(n,'"\n              style="\n                position: fixed;\n                top: 0px;\n                bottom: 0px;\n                right: 0px;\n                width: 100%;\n                border: none;\n                margin: 0;\n                padding: 0;\n                overflow: hidden;\n                height: 100%;\n            "></iframe>\n          '))})})}}};exports.default=h;
(function(){var t=exports.default||module.exports;"function"==typeof t&&(t=t.options),Object.assign(t,{render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("h1",{staticClass:"page-header"},[t._v("Objects in: "+t._s(t.state.host.bucket)+t._s(t.state.host.prefix?"/"+t.state.host.prefix:""))]),t._v(" "),s("div",{staticClass:"clearfix"},[s("strong",[t._v("Total:")]),t._v(" "),s("span",{staticClass:"text-muted"},[t._v(" Objects: "),s("span",{staticClass:"badge badge-light"},[t._v(t._s(t.paging.totalItems))]),t._v(", Disk Space: "),s("span",{staticClass:"badge badge-light"},[t._v(t._s(t._f("formatBytes")(t.totalBytes)))]),t._v(" "),s("form",{ref:"upload",staticClass:"upload_form"},[s("label",{staticClass:"btn btn-sm btn-outline-success float-right",attrs:{for:"upload_file"}},[s("fa",{attrs:{icon:"upload"}}),t._v("Â Upload ")],1),t._v(" "),s("input",{attrs:{id:"upload_file",name:"file",type:"file",multiple:""}})])])]),t._v(" "),t.state.host&&t.state.host.bucket?s("div",{staticClass:"card mt-2 mb-5"},[s("div",{staticClass:"card-header sticky bg-light"},[s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"card-title col-8 pt-1"},[s("span",{staticClass:"text-muted"},[t._v("Sort:")]),t._v(" "),s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.setSort("name")}}},["name"===this.sort.col?s("fa",{attrs:{icon:this.sort.desc?"angle-up":"angle-down"}}):t._e(),t._v("Name ")],1),t._v(", "),s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.setSort("size")}}},["size"===this.sort.col?s("fa",{attrs:{icon:this.sort.desc?"angle-up":"angle-down"}}):t._e(),t._v("Size ")],1),t._v(", "),s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.setSort("lastModified")}}},["lastModified"===this.sort.col?s("fa",{attrs:{icon:this.sort.desc?"angle-up":"angle-down"}}):t._e(),t._v("Date ")],1)]),t._v(" "),s("div",{staticClass:"input-group input-group-sm col-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.objectFilter,expression:"objectFilter"}],staticClass:"form-control",attrs:{placeholder:"Filter objects..."},domProps:{value:t.objectFilter},on:{input:function(a){a.target.composing||(t.objectFilter=a.target.value)}}})])])]),t._v(" "),s("ul",{staticClass:"list-unstyled mb-0"},[t.state.host.prefix?s("li",{staticClass:"media p-2 border-bottom"},[s("div",{staticClass:"media-body",staticStyle:{display:"inline-grid"}},[s("div",{staticClass:"font-weight-bold mt-0 mb-1 text-truncate"},[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.backPrefix(t.state.host.prefix)}}},[t._v("../ (go back)")])])])]):t._e(),t._v(" "),0===t.filteredObjects.length?s("li",{staticClass:"media p-2"},[t._m(0)]):t._e(),t._v(" "),t._l(t.filteredObjects,function(a){return s("li",{key:a.name+a.prefix,staticClass:"media border-bottom p-2"},[t.isImage(a.name)?[s("img",{staticClass:"mr-3 mt-1",staticStyle:{width:"120px","border-radius":"5px"},attrs:{load:t.getImage(a),src:a.src||"",alt:""}})]:t._e(),t._v(" "),a.prefix?[s("div",{staticClass:"media-body",staticStyle:{display:"inline-grid"}},[s("div",{staticClass:"font-weight-bold mt-0 mb-1 text-truncate"},[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.setPrefix(a.prefix)}}},[t._v(t._s(a.prefix))])])])]:[s("div",{staticClass:"media-body",staticStyle:{display:"inline-grid"}},[s("div",{staticClass:"font-weight-bold mt-0 mb-1 text-truncate"},[t._v(t._s(a.name))]),t._v(" "),s("small",[s("strong",[t._v("Last Modified:")]),t._v(" "),s("span",{staticClass:"text-muted nowrap"},[t._v(t._s(t._f("date_format")(a.lastModified)))])]),t._v(" "),s("small",[s("strong",[t._v("Type:")]),t._v(" "),s("span",{staticClass:"text-muted nowrap"},[t._v(t._s(t._f("mime")(a.name)))])]),t._v(" "),s("small",[s("strong",[t._v("Size:")]),t._v(" "),s("span",{staticClass:"text-muted nowrap"},[t._v(t._s(t._f("formatBytes")(a.size)))])])]),t._v(" "),s("button",{staticClass:"btn btn-xxs btn-outline-secondary mr-1",attrs:{type:"button"},on:{click:function(s){return t.download(a)}}},[s("fa",{attrs:{icon:"download"}}),t._v("Â Download ")],1),t._v(" "),s("button",{staticClass:"btn btn-xxs btn-outline-primary mr-1",attrs:{type:"button"},on:{click:function(s){return t.editItem(a)}}},[s("fa",{attrs:{icon:"pencil-alt"}}),t._v("Â Edit ")],1),t._v(" "),s("button",{staticClass:"btn btn-xxs btn-outline-danger",attrs:{type:"button",disabled:a.profile&&0===a.profile.id},on:{click:function(s){return t.deleteItem(a)}}},[s("fa",{attrs:{icon:"times"}}),t._v("Â Delete ")],1)]],2)}),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:t.filteredObjects.length>0,expression:"filteredObjects.length > 0"}],staticClass:"media p-2",staticStyle:{"background-color":"#fafafa"}},[s("div",{staticClass:"media-body"},[s("div",{staticClass:"row no-gutters",staticStyle:{"background-color":"#fafafa"}},[s("div",{staticClass:"col p-2"},[s("div",{staticClass:"form-group"},[t._v(" Per Page: "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.paging.perPage,expression:"paging.perPage"}],staticClass:"custom-select ml-1",staticStyle:{width:"100px"},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.paging,"perPage",a.target.multiple?s:s[0])}}},[s("option",[t._v("5")]),t._v(" "),s("option",[t._v("10")]),t._v(" "),s("option",[t._v("25")]),t._v(" "),s("option",[t._v("50")]),t._v(" "),s("option",[t._v("100")])])])]),t._v(" "),s("div",{staticClass:"col p-2"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.filteredObjects.length>0,expression:"filteredObjects.length > 0"}]},[t.objects.length>0?s("ul",{staticClass:"pagination float-right"},[s("li"),t._v(" "),s("li",{staticClass:"page-item pagination-prev",class:{disabled:1==t.paging.page}},[s("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"},on:{click:function(){t.paging.back()}}},[s("span",[t._v("Â«")]),t._v(" "),s("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._v(" "),t._l(t.paging.pages,function(a){return[Math.abs(a-t.paging.page)<5||a===t.paging.pages.length||1===a?s("li",{key:"pn-"+a,staticClass:"page-item",class:{active:t.paging.page===a,last:a===t.paging.pages.length&&Math.abs(a-t.paging.page)>5,first:1===a&&Math.abs(a-t.paging.page)>5},on:{click:function(){t.paging.page=a}}},[s("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"}},[t._v(t._s(a))])]):t._e()]}),t._v(" "),s("li",{staticClass:"page-item pagination-next",class:{disabled:t.paging.page===t.paging.pages.length}},[s("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"},on:{click:function(){t.paging.next()}}},[s("span",[t._v("Â»")]),t._v(" "),s("span",{staticClass:"sr-only"},[t._v("Next")])])])],2):t._e()])])])])])],2)]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"media-body",staticStyle:{display:"inline-grid"}},[a("div",{staticClass:"text-truncate"},[this._v("No files.")])])}],_compiled:!0,_scopeId:"data-v-426cf2",functional:void 0});})();
},{"crypto-js/aes":"Srb3","crypto-js/enc-utf8":"NlLc","mime-types":"mJsC","buffer":"aMB2"}],"yEFA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("crypto-js/aes")),t=o(require("crypto-js/enc-utf8")),r=o(require("../components/host/mixin")),n=o(require("../components/host/buckets")),s=o(require("../components/host/objects"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t,r,n,s,o,a){try{var c=e[o](a),u=c.value}catch(i){return void r(i)}c.done?t(u):Promise.resolve(u).then(n,s)}function h(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var o=e.apply(t,r);function a(e){i(o,n,s,a,c,"next",e)}function c(e){i(o,n,s,a,c,"throw",e)}a(void 0)})}}var p={name:"host",props:["state","host_key","bucket","prefix"],mixins:[r.default],components:{hostBuckets:n.default,hostObjects:s.default},data:function(){return{alert:{}}},watch:{host_key:function(){var e=h(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("host: watcher: host_key",t),!t){e.next=4;break}return e.next=4,this.setHost(this.state.hosts[t]||{});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),bucket:function(){var e=h(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("host: watcher: bucket",t),this.$set(this.state.host,"bucket",t||""),!t||!this.state.host){e.next=5;break}return e.next=5,this.setHost(this.state.host||{});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),"state.host":function(e){console.log("host: watcher: state.host",e),e.error?this.alert={type:"alert-danger",message:e.error}:this.alert={}}},beforeMount:function(){this.state.authenticated||this.$router.push("/login")},mounted:function(){var e=this;return h(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setHost(e.state.hosts[e.host_key]);case 2:case"end":return t.stop()}},t)}))()},methods:{setHost:function(e){var t=this;return h(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("host:setHost",e),t.alert={},e=c(c({name:t.host_key,hostname:"",url:"",port:9e3,useSSL:!1,error:!1,buckets:[]},e),{},{bucket:t.bucket||"",prefix:t.prefix||""}),n={},r.prev=4,n=new URL(e.url),r.next=14;break;case 8:return r.prev=8,r.t0=r.catch(4),t.state.alert={message:"Invalid URL, this host is not connectable, check settings and try again.",type:"alert-danger"},t.state.hosts[t.host_key].error="Invalid URL",t.$router.push("/"),r.abrupt("return");case 14:e.hostname=n.hostname,e.port=parseInt(n.port,10),e.useSSL="https:"===n.protocol;try{e.client=new minio.Client({endPoint:e.hostname,port:e.port,useSSL:e.useSSL,accessKey:e.accessKey,secretKey:e.secretKey})}catch(s){e.error=s.message}t.$set(t.state.hosts,t.host_key,e),t.$set(t.state,"host",e);case 20:case"end":return r.stop()}},r,null,[[4,8]])}))()}}};exports.default=p;
(function(){var t=exports.default||module.exports;"function"==typeof t&&(t=t.options),Object.assign(t,{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.state.authenticated&&t.state.host?a("article",{staticClass:"content container-fluid"},[a("nav",{attrs:{"aria-label":"breadcrumb"}},[a("div",{staticClass:"breadcrumb mt-3 d-flex justify-content-between align-items-center"},[a("ol",{staticClass:"breadcrumb mb-0 p-0"},[a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.$router.push("/")}}},[t._v("Hosts")])]),t._v(" "),t.state.host&&t.state.host.name?a("li",{class:["breadcrumb-item"],attrs:{"aria-current":"page"}},[t.state.host&&t.state.host.name&&t.bucket?a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.$router.push("/host/"+t.state.host.name)}}},[t._v(t._s(t.state.host.name))]):a("span",[t._v(t._s(t.state.host.name))])]):t._e(),t._v(" "),t.state.host&&t.state.host.name&&t.bucket?a("li",{class:["breadcrumb-item"],attrs:{"aria-current":"page"}},[t.state.host&&t.state.host.name&&!t.bucket&&t.prefix?a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.$router.push("/host/"+t.state.host.name+"/"+t.bucket)}}},[t._v(t._s(t.bucket))]):a("span",[t._v(t._s(t.bucket))])]):t._e(),t._v(" "),t.state.host&&t.state.host.name&&t.bucket&&t.prefix?a("li",{class:["breadcrumb-item"],attrs:{"aria-current":"page"}},[t._v(t._s(t.prefix))]):t._e()])])]),t._v(" "),a("alert",{attrs:{alert:t.alert}}),t._v(" "),t.state.host.name?[t.state.host.bucket?a("host-objects",{attrs:{state:t.state}}):a("host-buckets",{attrs:{state:t.state}})]:t._e()],2):t._e()},staticRenderFns:[],_compiled:!0,_scopeId:"data-v-515746",functional:void 0});})();
},{"crypto-js/aes":"Srb3","crypto-js/enc-utf8":"NlLc","../components/host/mixin":"YPMF","../components/host/buckets":"Ib0I","../components/host/objects":"zUex"}]},{},[], null)